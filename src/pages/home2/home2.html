
<ion-content style="position: relative; height: 90%;">
  <div class="logo">
    <img src="./assets/imgs/samchully-es-logo.png" alt="logo">
  </div>
  <div *ngIf="currentTab==1" class="flag1">
    <header>
      <div class="agency-name">{{engineer_data.agency}}</div>
      <div class="user-name">{{engineer_data.name}} {{engineer_data.position}}님 반갑습니다.</div>
    </header>
    <article class="flag1-article">
      <div class="contents">
        <div class="sub-contents" id="take">
          <table>
            <th id="circle-table">
              <!--ngIf써야함-->
              <div class="foot-number">
                {{home_icon_count.receipt.count}}
              </div>
            </th>
            <tr (click)="go_viewdatapage('receipt')">
              <div *ngIf="home_icon_count.receipt.new" class="new_badge">NEW</div>
              <div class="circle">
                <img src="./assets/imgs/headphone.png" alt="">
              </div>
            </tr>
            <tr class="circle-tr">
              접수건<br>
              <!-- (현재접수) -->
            </tr>
          </table>
          </div>

        <!-- 처리진행 starting... -->
        <div class="sub-contents" id="progress">
          <table>
            <th id="circle-table">
              <div class="foot-number">
                {{home_icon_count.request.count}}
              </div>
            </th>
            <tr (click)="go_viewdatapage('request')">
              <div *ngIf="home_icon_count.request.new" class="new_badge">NEW</div>
              <div class="circle">
                <img src="./assets/imgs/wrench.png" alt="">
              </div>
            </tr>
            <tr class="circle-tr">
              AS처리진행<br>
              <!-- (처리진행) -->
            </tr>
          </table>
        </div>
        <!-- 처리진행 ending... -->

        <!-- 처리완료 starting... -->
        <div class="sub-contents" id="complete">
          <table>
            <th id="circle-table">
              <div class="foot-number">
                {{home_icon_count.complete.count}}
              </div>
            </th>
            <tr (click)="go_viewdatapage('complete')">
              <div *ngIf="home_icon_count.complete.new" class="new_badge">NEW</div>
              <div class="circle">
                <img src="./assets/imgs/complete.png" alt="">
              </div>
            </tr>
            <tr class="circle-tr">
              AS처리완료<br>
              <!-- (승인완료) -->
            </tr>
          </table>
        </div>
        <!-- 처리완료 ending... -->

      </div>
      <div class="contents">
        <div class="sub-contents" id="news">
          <table>
            <th id="circle-table">
              <div class="foot-number">
                {{home_icon_count.gongji.count}}
              </div>
            </th>
            <tr (click)="go_viewdatapage('gongji')">
              <div *ngIf="home_icon_count.gongji.new" class="new_badge">NEW</div>
              <div class="circle">
                <img src="./assets/imgs/bell.png" class="icon-bell" alt="bell">
              </div>
            </tr>
            <tr class="circle-tr">
              공지사항
            </tr>
          </table>
        </div>
        <div class="sub-contents" id="waiting">
          <table>
            <th id="circle-table">
              <div class="foot-number">
                {{home_icon_count.waiting.count}}
              </div>
            </th>
            <tr (click)="go_viewdatapage('waiting')">
              <div *ngIf="home_icon_count.waiting.new" class="new_badge">NEW</div>
              <div class="circle">
                <img src="./assets/imgs/to-do-list.png" alt="">
              </div>
            </tr>
            <tr class="circle-tr">
              처리대기
            </tr>
          </table>
        </div>
        <div class="sub-contents" id="list">
          <table>
            <th id="circle-table">
              <div class="foot-number">
                {{home_icon_count.hold.count}}
              </div>
            </th>
            <tr (click)="go_viewdatapage('hold')">
              <div *ngIf="home_icon_count.hold.new" class="new_badge">NEW</div>
              <div class="circle">
                <img src="./assets/imgs/warning.png" class="icon-warning" alt="warning">
              </div>
            </tr>
            <tr class="circle-tr">
              승인보류
            </tr>
          </table>
        </div>
      </div>
    </article>
  </div>
  <div *ngIf="currentTab==2" class="flag2">
    <header>
      <div class="header-msg">AS접수</div>
    </header>
    <article class="flag2-article">
      <div class="flag2-contents">
        <table class="flag2-table">
          <tr class="flag2-table-tr">
            <td colspan=3>접수번호 &nbsp;&nbsp; {{receipt_data.receipt_number}}</td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-red.png" alt=""></td>
            <td class="flag2-table-td-second">AS신청자</td>
            <td class="flag2-table-td-third">

              <input type="text" id="as-add-manager" [(ngModel)]="receipt_data.as_applicant" placeholder="">
              <button><ion-icon style="width: 30px;
                max-width: 15%;
                min-height: 30px;" ios="ios-add" md="md-add" (click)="add_applicant_data()" id="as-add-icon"></ion-icon></button>
            </td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-red.png" alt=""></td>
            <td class="flag2-table-td-second">신청자 휴대전화</td>
            <td class="flag2-table-td-third">

              <input type="text" id="as-add-manager_phone" [(ngModel)]="receipt_data.as_applicant_phone" (keyup)="onlynumber(0)" placeholder="">
            </td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-red.png" alt=""></td>
            <td class="flag2-table-td-second">대표상호</td>
            <td class="flag2-table-td-third">
              <input type="text" [(ngModel)]="receipt_data.clientInfo.customer" placeholder="">
              <!-- <ion-icon name="search" (click)="open_search_page('customer',receipt_data.clientInfo.customer)"
              style="position: absolute; top: 0%;
              right: -10px; width: 30px;
              height: 30px; padding: 7px;"></ion-icon> -->
            </td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-red.png" alt=""></td>
            <td class="flag2-table-td-second">건물명</td>
            <td class="flag2-table-td-third">
              <input type="text" [(ngModel)]="receipt_data.clientInfo.customer_building" placeholder="">
              <!-- <ion-icon name="search" (click)="open_search_page('customer_building',receipt_data.clientInfo.customer_building)"
              style="position: absolute; top: 0%;
              right: -10px; width: 30px;
              height: 30px; padding: 7px;"></ion-icon> -->
            </td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag2-table-td-second">원격유무</td>
            <td class="flag2-table-td-third" id="flag2-radio-align">
              <span class="flag-radio">
                <input type="radio" name="remote" id="remote-yes" value="유">
                <label for="remote-yes">유</label>
              </span>
              <span class="flag-radio">
                <input type="radio" name="remote" id="remote-no" value="무" checked>
                <label for="remote-no">무</label>
              </span>
            </td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag2-table-td-second">계약상황</td>
            <td class="flag2-table-td-third" id="flag2-radio-align">
              <span class="flag-radio">
                <input type="radio" name="status" id="status-yp" value="예스파트너" checked>
                <label for="status-yp">YP</label>
              </span>
              <span class="flag-radio">
                <input type="radio" name="status" id="status-basic" value="일반">
                <label for="status-basic">일반</label>
              </span>
            </td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag2-table-td-second">에러코드</td>
            <td class="flag2-table-td-third">
              <select name="flag2-error"  [(ngModel)]="receipt_data.error_code" id="flag2-error">
                <option  *ngFor="let a of error_list"  value="{{a.code}}"> {{a.code}}</option>

              </select>
            </td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag2-table-td-second">고장계통</td>
            <td class="flag2-table-td-third">
              <div style="overflow-y:scroll; height:100px; width:100%">
                <span><strong>실외기</strong></span><br/>
                <label *ngFor="let i of outdoor_list" style="padding: 0px;">
                  <input type="checkbox" name="outdoor_list" id="outdoor_list{{i}}" value="{{i}}">
                  <span>{{i}}</span><br/>
                </label>

                <br/>
                <span><strong>실내기</strong></span><br/>
                <label *ngFor="let j of indoor_list" style="padding: 0px;">
                  <input type="checkbox" name="indoor_list" id="indoor_list{{j}}" value="{{j}}">
                  <span>{{j}}</span><br/>
                </label>

                <br/>
                <span><strong>PC자동제어</strong></span><br/>
                <label *ngFor="let j of pc_automatic" style="padding: 0px;">
                  <input type="checkbox" name="pc_automatic" id="pc_automatic{{j}}" value="{{j}}">
                  <span>{{j}}</span><br/>
                </label>
              </div>
            </td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-red.png" alt=""></td>
            <td class="flag2-table-td-second">증상내용</td>
            <td class="flag2-table-td-third"></td>
          </tr>
          <tr class="flag2-table-tr">
            <td colspan=3 style="width:100%"><input type="text" [(ngModel)]="receipt_data.receipt_content"
                class="flag2-input-contents"></td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag2-table-td-second">접수구분</td>
            <td class="flag2-table-td-third" id="flag2-radio-align">
              <span class="flag-radio">
                <input type="radio" name="division" id="division-in" value="내근">
                <label for="division-in">내근</label>
              </span>
              <span class="flag-radio">
                <input type="radio" name="division" id="division-out" value="외근" checked>
                <label for="division-out">외근</label>
              </span>
            </td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag2-table-td-second">주소</td>
            <td class="flag2-table-td-third">
              <input type="text" [(ngModel)]="receipt_data.totalAddress" placeholder="">
              <!-- <ion-icon name="search" (click)="open_search_page('customer_building',receipt_data.clientInfo.customer_building)"
              style="position: absolute; top: 0%;
              right: -10px; width: 30px;
              height: 30px; padding: 7px;"></ion-icon> -->
            </td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag2-table-td-second">보증기간</td>
            <td class="flag2-table-td-third" id="datetime_here">
              <input type="date" class="flag2-datetime" name="flag2-date" [(ngModel)]="receipt_data.clientInfo.warranty_date" value={{today_date}}
                min="2020-01-01" max="2030-12-31">
            </td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag2-table-td-second">처리예정(작업일)</td>
            <td class="flag2-table-td-third" id="datetime_here">
              <input type="date" class="flag2-datetime" name="flag2-date" [(ngModel)]="receipt_data.due_date" value={{today_date}}
                min="2020-01-01" max="2030-12-31">
            </td>
          </tr>
          <tr class="flag2-table-tr">
            <td class="flag2-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag2-table-td-second">처리예정(작업시간)</td>
            <td class="flag2-table-td-third" id="datetime_here">
              <input type="time" class="flag2-datetime" [(ngModel)]="receipt_data.due_time">
            </td>
          </tr>
          <tr class="flag2-table-tr" *ngIf="receipt_data.due_date != ''">
            <td colspan="3" class="flag2-table-td-last">
              {{receipt_data.due_date}}<br>
              <!-- 예정시간까지 {{remain_time}}시간 남았습니다. -->
              {{get_remainder_date(receipt_data.due_date,receipt_data.due_time)}}
            </td>
          </tr>
        </table>
      </div>
      <div class="flag-send">
        <input type="button" class="complete-btn" (click)="receipt_save()" value="접수완료">
        <!-- <input type="button" class="update-btn" (click)="flag2_save(2)" value="수정"> -->
      </div>
    </article>
  </div>

  <!-- 하단에 AS 처리 버튼 클릭하면 아래가 뜬다. -->
  <div style="" *ngIf="currentTab==3" class="flag3">
    <header style="height: 20% !important;" class="flag3-header">
      <div class="header-msg">AS진행/완료</div>
      <div class="as-info">
        <select name="flag3-condition" id="flag3-condition" value="{{receipt_list_sort_ch}}" [ngModel]="receipt_list_sort_ch" (ngModelChange)="list_sorting()">
          <!-- <option value="완료진행별">완료진행별</option> -->
          <option value="ascending">오름차순</option>
          <option value="descending">내림차순</option>
          <!--
          <option value="AS남은시간내림">AS남은시간내림</option>
          <option value="AS남은시간올림">AS남은시간올림</option>
          <option value="접수번호내림">접수번호내림</option>
          <option value="접수번호올림">접수번호올림</option>
          <option value="내외근별">내외근별</option>
          <option value="원격유무별">원격유무별</option>
          <option value="보증별">보증별(유무상별)</option>
          <option value="승인별">승인별</option>
          -->
        </select>
      </div>

      <div class="as-color">
        <table>
          <!-- <tr>
            <td>
              <div class="as-green"></div>
            </td>
            <td>완료</td>
          </tr>
          <tr>
            <td>
              <div class="as-brown"></div>
            </td>
            <td>진행</td>
          </tr>
          <tr>
            <td>
              <div class="as-red"></div>
            </td>
            <td>보류</td>
          </tr> -->
          <tr>
            <td>
              <div class="as-green"></div>
            </td>
            <td>접수</td>
          </tr>
          <tr>
            <td>
              <div class="as-blue"></div>
            </td>
            <td>진행</td>
          </tr>
          <tr>
            <td>
              <div class="as-gray"></div>
            </td>
            <td>완료</td>
          </tr>
          <tr>
            <td>
              <div class="as-black"></div>
            </td>
            <td>대기</td>
          </tr>
        </table>
      </div>
    </header>
    <br/>
    <article style="height: 75% !important;" class="flag3-article">
      <!--조건에 따라 class이름 분기 필요-->
      <!--*ngFor 필요-->
      <div style="height: unset !important;     height: 100% !important;
      width: 100%;" class="as-list">
        <table *ngFor="let list of as_data.all ; let idx=index" class="as-list-thing" (click)="detail(list,list.receipt_number)">
          <!-- <tbody *ngIf="(list.status != '처리대기') && (list.status != '처리완료') && (list.status != '승인요청')"> -->
          <!-- <tbody *ngIf="(list.status != '처리완료') && (list.status != '승인요청')"> -->
          <tbody *ngIf="(list.status != '승인요청')">
            <tr>
              <td rowspan=4 class="as-list-td-circle">
                <input type="hidden" value="{{list.status}}">
                <div *ngIf="list.status=='현재접수'" class="as-list-green"> {{idx+1}}</div>
                <div *ngIf="list.status=='처리진행'" class="as-list-blue">  {{idx+1}}</div>
                <div *ngIf="list.status=='승인완료'" class="as-list-gray">  {{idx+1}}</div>
                <div *ngIf="list.status=='처리완료'" class="as-list-gray">  {{idx+1}}</div>
                <div *ngIf="list.status=='처리대기'" class="as-list-black"> {{idx+1}}</div>
                <!--
                  <div *ngIf="list.status=='처리대기'" class="as-list-brown">{{idx + 1}}</div>
                  <div *ngIf="list.status=='처리완료'" class="as-list-brown">{{idx + 1}}</div>
                -->
              </td>
              <td style="font-size:15px">{{list.clientInfo.customer}} / {{list.error_code}} / {{list.receipt_content}}</td>
            </tr>
            <tr style="color:#707070; font-size:13px;">
              <td>{{list.receipt_number}} / {{list.receipt_type}} / {{list.remote_division}} / {{list.warranty}}</td>
            </tr>

            <!-- <tr *ngIf="list.status=='처리진행'" style="color:#707070; font-size:13px;">
              <td>{{get_remainingtime(list)}}</td>
            </tr> -->

            <!-- 접수를 한 사람의 이름과 직급, 처리진행을 누른 사람의 이름과 직급, 승인보류를 누른 사람의 이름과 직급 -->
            <tr>
              <!-- <td *ngIf="list.status=='승인완료'">AS 완료하였습니다.</td>
              <td *ngIf="list.status=='현재접수'">AS 접수하였습니다. <font color="red">{{list.receiptionist}}{{list.position}}</font></td>
              <td *ngIf="list.status=='처리진행'">AS 진행중입니다. <font color="red">{{list.worker_receiptgoing}}{{list.position}}</font></td>
              <td *ngIf="list.status=='승인보류'">AS 보류하였습니다.</td> -->

              <!-- ****** -->
              <td *ngIf="list.status=='현재접수'">AS 접수하였습니다. <font *ngIf="list.engineer!=''" style="color:rgb(0, 166, 76);">{{list.engineer}}{{list.progress_engineer_position}}</font></td>
              <td *ngIf="list.status=='처리진행'">AS 진행중입니다. <font *ngIf="list.engineer!=''" style="color:rgb(64, 131, 203);">{{list.engineer}}{{list.progress_engineer_position}}</font></td>
              <td *ngIf="list.status=='처리완료'">AS 완료하였습니다. <font *ngIf="list.engineer!=''" style="color:rgb(116, 116, 116);">{{list.engineer}}{{list.progress_engineer_position}}</font></td>
              <td *ngIf="list.status=='승인완료'">AS 승인하였습니다. <font *ngIf="list.engineer!=''" style="color:rgb(116, 116, 116);">{{list.engineer}}{{list.progress_engineer_position}}</font></td>
              <td *ngIf="list.status=='처리대기'">AS 대기중입니다. <font *ngIf="list.engineer!=''" style="color:rgb(28, 26, 18);">{{list.engineer}}{{list.progress_engineer_position}}</font></td>

              <!-- <td *ngIf="list.status=='승인보류'">AS 보류하였습니다.</td> -->
            </tr>
            <tr>
              <td *ngIf="list.status=='처리진행'" style="color: rgb(234, 100, 37);">{{get_remainder_date(list.due_date,list.due_time)}}</td>
            </tr>
          </tbody>
        </table>

      </div>
    </article>
  </div>

  <!-- 스케줄 페이지 start .... -->
  <div *ngIf="currentTab==4" class="flag4">
    <header>
      <div class="header-msg">스케줄</div>
    </header>
    <article>
      <ion-grid>
        <div class="monthintro">
          <img src="./assets/imgs/left-arrow.png" class="left-arrow" (click)="goToLastMonth()" alt="left-arrow">
          <a id="month">{{schedule_title}} {{currentYear}} </a>
          <img src="./assets/imgs/right-arrow.png" class="right-arrow" (click)="goToNextMonth()" alt="right-arrow">

        </div>
        <ion-row class="calendar-weekday">
          <ion-col>Sun</ion-col>
          <ion-col>Mon</ion-col>
          <ion-col>Tues</ion-col>
          <ion-col>Wed</ion-col>
          <ion-col>Thur</ion-col>
          <ion-col>Fri</ion-col>
          <ion-col>Sat</ion-col>
        </ion-row>
        <div class="calendar-date">
          <div *ngFor="let lastDay of daysInLastMonth" class="col-1 last-month" style="float: left;" (click)="goToLastMonth()">
            {{lastDay}}
          </div>
          <div *ngFor="let day of daysInThisMonth" class="col-1" style="float: left;" (click)="click_schedule(day)">
            <div>{{day}}</div>

            <div>
              <div
              *ngIf="schedule_list[day]"
              style="
              width: 7px; height: 7px;
              color: #E74371; margin-top: 5px;
              background: #E74371;
              border-radius: 20px;
              display: inline-block;">
              </div>
              <span *ngIf="schedule_list[day]" style="font-size: 12px;">X {{schedule_list[day].length}}</span>
            </div>

            <div
            *ngIf="!schedule_list[day]"
            style="height: 40px; overflow: hidden; font-size: 80%;"></div>

          </div>
          <div *ngFor="let nextDay of daysInNextMonth" class="col-1 next-month" (click)="goToNextMonth()">
            {{nextDay}}
          </div>
        </div>
      </ion-grid>
    </article>
  </div>
  <!-- 스케줄 페이지 end .... -->
  <div *ngIf="currentTab==5" class="flag5">
    <div (click)="logout()"
    style="position: absolute; right: 5px; top: 5px; padding: 5px;
    border: solid 1px black; width: auto; height: auto;">
      <span>로그아웃</span>
    </div>
    <header>
      <div class="header-msg">마이페이지</div>
    </header>
    <article>
      <div class="flag5-intro">
        <div style="text-align: center; margin-bottom: 5px;"  *ngIf="engineer_data.profile_image!=''&&engineer_data.profile_image!=undefined">
          <button style="height: 20px;"
          (click)="take_photo()">사진 수정</button>
        </div>
        <div class="engineer-img">
          <img *ngIf="engineer_data.profile_image==' '||engineer_data.profile_image==undefined" src="../../assets/imgs/bussiness-man.png" alt="user" (click)="take_photo()">
          <img *ngIf="engineer_data.profile_image!=undefined" src="{{engineer_data.profile_image}}" alt="user" (click)="photo_view(engineer_data.profile_image)">
        </div>
        <div class="engineer-into">
          <p>{{engineer_data.agency}}</p>
          <p>{{engineer_data.name}} {{engineer_data.position}}님</p>
        </div>
      </div>
      <!-- 여기서부터 뿌려준다. start.... -->
      <div class="my-list">
        <div class="my-list-title">
          <ion-icon ios="ios-archive" md="md-archive"></ion-icon>
          <p>대리점 접수내역</p>
        </div>
        <div class="my-current-list">
          <table *ngFor="let list of as_data.receipt; let idx=index" class="as-list-thing" (click)="go_detail(list)">
            <tr>
              <td>{{list.clientInfo.customer}}/{{list.error_code}}/{{list.receipt_content}}</td>
            </tr>
            <tr>
              <td>{{list.receipt_number}}/{{list.assigned_company}}/{{list.remote_division}}/{{list.receipt_type}}</td>
            </tr>
            <tr>
              <td>
                <font style="color:rgb(0, 166, 76);">AS접수하였습니다. {{list.engineer}}{{list.progress_engineer_position}}</font>
              </td>
            </tr>
          </table>
        </div>
        <div class="my-list-title">
          <ion-icon ios="ios-archive" md="md-archive"></ion-icon>
          <p>대리점 처리진행내역</p>
        </div>
        <div class="my-current-list">
          <table *ngFor="let list of as_data.request; let idx=index" class="as-list-thing" (click)="go_detail(list)">
            <tr>
              <td>{{list.clientInfo.customer}}/{{list.error_code}}/{{list.receipt_content}}</td>
            </tr>
            <tr>
              <td>{{list.receipt_number}}/{{list.assigned_company}}/{{list.remote_division}}/{{list.receipt_type}}</td>
            </tr>
            <tr>
              <td>
                <font><font style="color:rgb(64, 131, 203);">AS 진행중입니다. {{list.engineer}}{{list.progress_engineer_position}}</font></font>
              </td>
            </tr>
          </table>
        </div>
        <div class="my-list-title">
          <ion-icon ios="ios-archive" md="md-archive"></ion-icon>
          <p>대리점 완료처리내역</p>
        </div>
        <div class="my-complete-list">
          <table *ngFor="let list of as_data.complete; let idx=index" class="as-list-thing" (click)="go_detail(list)">
            <tr>
              <td>{{list.clientInfo.customer}}/{{list.error_code}}/{{list.receipt_content}}</td>
            </tr>
            <tr>
              <td>{{list.receipt_number}}/{{list.assigned_company}}/{{list.remote_division}}/{{list.receipt_type}}</td>
            </tr>
            <tr>
              <td>
                <font style="color:rgb(116, 116, 116);">AS 완료하였습니다. {{list.engineer}}{{list.progress_engineer_position}}</font>
              </td>
            </tr>
          </table>
        </div>
        <div class="my-list-title">
          <ion-icon ios="ios-archive" md="md-archive"></ion-icon>
          <p>대리점 처리대기내역</p>
        </div>
        <div class="my-waiting-list">
          <table *ngFor="let list of as_data.waiting; let idx=index" class="as-list-thing" (click)="go_detail(list)">
            <tr>
              <td>{{list.clientInfo.customer}}/{{list.error_code}}/{{list.receipt_content}}</td>
            </tr>
            <tr>
              <td>{{list.receipt_number}}/{{list.assigned_company}}/{{list.remote_division}}/{{list.receipt_type}}</td>
            </tr>
            <tr>
              <td>
                <font style="color:rgb(116, 116, 116);">승인보류 하였습니다. {{list.engineer}}{{list.progress_engineer_position}}</font>
              </td>
            </tr>
          </table>
        </div>
        <div class="my-list-title">
          <ion-icon ios="ios-archive" md="md-archive"></ion-icon>
          <p>대리점 승인보류내역</p>
        </div>
        <div class="my-waiting-list">
          <table *ngFor="let list of as_data.hold; let idx=index" class="as-list-thing" (click)="go_detail(list)">
            <tr>
              <td>{{list.clientInfo.customer}}/{{list.error_code}}/{{list.receipt_content}}</td>
            </tr>
            <tr>
              <td>{{list.receipt_number}}/{{list.assigned_company}}/{{list.remote_division}}/{{list.receipt_type}}</td>
            </tr>
            <tr>
              <td>
                <font style="color:rgb(116, 116, 116);">승인보류 하였습니다. {{list.engineer}}{{list.progress_engineer_position}}</font>
              </td>
            </tr>
          </table>
        </div>
      </div>

      <!-- 여기서부터 뿌려준다. end.... -->
    </article>
  </div>
  <div *ngIf="currentTab==6" class="flag6">
    <header>
      <div class="header-msg">고객관리</div>
    </header>
    <article class="flag6-article" style="overflow-y: scroll; margin-bottom: 20%;">
      <div class="flag6-contents">
        <table class="flag6-table">
          <tr class="flag6-table-tr">
            <td colspan=3 id="flag6-table-tr-title">
              <ion-icon ios="ios-contact" md="md-contact"></ion-icon>
              <span>고객정보</span>

              <span style="font-size: 15px; float: right;" (click)="add_new_customer_flag_change()">
                신규고객 추가
                <div style="background-color: rgb(39,162,0);
                color: white; padding: 0 5px; font-size: 25px;
                width: 25px; height: 25px; float: right;
                border-radius: 50%; margin-left: 10px;">+</div>
              </span>
            </td>
          </tr>
          <!-- <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-red.png" alt=""></td>
            <td class="flag6-table-td-second">접수고객</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <input id="customer_search" type="text" [(ngModel)]="flag6_name" placeholder="">
              <ion-icon name="search" (click)="flag6_searching('customer')"
              style="position: absolute; top: 0%;
              right: -10px; width: 30px;
              height: 30px; padding: 7px;"></ion-icon>
            </td>
          </tr> -->

          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">고객번호</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <input id="customer_search" type="text" [(ngModel)]="receipt_data.clientInfo.no" placeholder="">
            </td>
          </tr>

          <!-- 관리자 메뉴 -->
          <tr class="flag6-table-tr">
            <td *ngIf="add_new_customer_flag==false" class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td *ngIf="add_new_customer_flag==true" class="flag6-table-td-first"><img src="./assets/imgs/checkbox-red.png" alt=""></td>
            <td class="flag6-table-td-second">건물담당자</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <input type="text" [(ngModel)]="receipt_data.clientInfo.building_manager_name" placeholder="">
              <ion-icon name="search" (click)="open_search_page('building_manager_name',receipt_data.clientInfo.building_manager_name)"
              style="position: absolute; top: 0%;
              right: -10px; width: 30px;
              height: 30px; padding: 7px;"></ion-icon>
            </td>
          </tr>
          <tr class="flag6-table-tr">
            <td *ngIf="add_new_customer_flag==false" class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td *ngIf="add_new_customer_flag==true" class="flag6-table-td-first"><img src="./assets/imgs/checkbox-red.png" alt=""></td>
            <td class="flag6-table-td-second">담당자휴대전화</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <input type="text" id="as-add-manager_phone1" (keyup)="onlynumber(1)" [(ngModel)]="receipt_data.clientInfo.building_manager_call" placeholder="">
              <ion-icon name="search" (click)="open_search_page('building_manager_call',receipt_data.clientInfo.building_manager_call)"
              style="position: absolute; top: 0%;
              right: -10px; width: 30px;
              height: 30px; padding: 7px;"></ion-icon>
            </td>
          </tr>
          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-red.png" alt=""></td>
            <td class="flag6-table-td-second">대표상호</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <input type="text" [(ngModel)]="receipt_data.clientInfo.customer" placeholder="">
              <ion-icon name="search" (click)="open_search_page('customer',receipt_data.clientInfo.customer)"
              style="position: absolute; top: 0%;
              right: -10px; width: 30px;
              height: 30px; padding: 7px;"></ion-icon>
            </td>
          </tr>
          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-red.png" alt=""></td>
            <td class="flag6-table-td-second">건물명</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <input type="text" [(ngModel)]="receipt_data.clientInfo.customer_building" placeholder="">
              <ion-icon name="search" (click)="open_search_page('customer_building',receipt_data.clientInfo.customer_building)"
              style="position: absolute; top: 0%;
              right: -10px; width: 30px;
              height: 30px; padding: 7px;"></ion-icon>
              <!-- <ion-icon name="search" (click)="flag6_searching('sub_store')"
              style="position: absolute; top: 20%;right: 0;"></ion-icon> -->
            </td>
          </tr>
          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">전화번호</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <input type="text" id="as-add-manager_phone2" (keyup)="onlynumber(2)" [(ngModel)]="receipt_data.clientInfo.building_call" placeholder="">
              <!-- <ion-icon name="search" (click)="flag6_searching('call')"
              style="position: absolute; top: 20%;right: 0;"></ion-icon> -->
            </td>
          </tr>
          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">소재지 주소</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <input type="text" [(ngModel)]="receipt_data.clientInfo.reg_address" placeholder="">
              <!-- <ion-icon name="search" (click)="flag6_searching('address')"
              style="position: absolute; top: 20%;right: 0;"></ion-icon> -->
            </td>
          </tr>

          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">서비스구분</td>
            <td class="flag6-table-td-third" id="flag6-table-td-third-guarantee">
              <span class="flag-radio" style="width: auto; margin-right: 5%;" (click)="click_customertype('일반')">
                <input type="radio" name="customer_type" id="normal" [(ngModel)]="receipt_data.clientInfo.customer_type" value="일반" checked>
                <label for="guarantee-out">일반</label>
              </span>
              <span class="flag-radio" style="width: auto;" (click)="click_customertype('예스파트너')">
                <input type="radio" name="customer_type" id="yes_partner" [(ngModel)]="receipt_data.clientInfo.customer_type" value="예스파트너">
                <label for="guarantee-in">예스파트너</label>
              </span>
            </td>
          </tr>

          <!-- <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"></td>
            <td class="flag6-table-td-one">모델명</td>
            <td class="flag6-table-td-two">제조번호</td>
            <td class="flag6-table-td-three">운전시간</td>
          </tr>

          <tr class="flag6-table-tr" *ngFor="let unit of out_unitlist">
            <td class="flag6-table-td-first"></td>
            <td class="flag6-table-td-one"><input type="text" [(ngModel)]="unit.model" placeholder="모델명"></td>
            <td class="flag6-table-td-two"><input type="text" [(ngModel)]="unit.model" placeholder="제조번호"></td>
            <td class="flag6-table-td-three"><input type="text" [(ngModel)]="unit.model" placeholder="운전시간"></td>
          </tr> -->

          <!-- <tr class="flag6-table-tr" id="flag6-table-tr-title">
            <td colspan=3>
              <ion-icon ios="ios-settings" md="md-settings"></ion-icon>
              <span>제품정보</span>
            </td>
          </tr>
          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">제품명</td>
            <td class="flag6-table-td-third">
              <select name="customer-product-name" [(ngModel)]="flag6_product" id="customer-product-name">
                <option value="" selected>선택하세요.</option>
                <option *ngFor="let pd of flag6_productlist" value={{pd}}>{{pd}}</option>
              </select>
            </td>
          </tr>
          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">모델명</td>
            <td class="flag6-table-td-third">
              <div style="overflow-y:scroll; height:100px; width:100%">
                <label *ngFor="let md of flag6_modellist; let j = index;" style="padding: 0px;">
                  <input type="checkbox" name="customer-model-name" id="customer-model-name{{j}}" value="{{md}}">
                  <span>{{md}}</span><br/>
                </label>
              </div>
            </td>
          </tr>
          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">보증기간</td>
            <td class="flag6-table-td-third" id="flag6-table-td-third-guarantee" style="padding: 0 10px;">
              <input type="date" class="flag6-datetime" name="flag6-date" [(ngModel)]="flag6_guarantee" value={{today}}>
            </td>
          </tr> -->

          <!-- <tr class="flag6-table-tr" id="flag6-table-tr-title">
            <td colspan=2>
              <ion-icon ios="ios-briefcase" md="md-briefcase"></ion-icon>
              <span>수리이력</span>
            </td>
          </tr> -->
          <tr class="flag6-table-tr">
            <td colspan=3 id="flag6-table-tr-title">
              <!-- <ion-icon ios="ios-contact" md="md-contact"></ion-icon> -->
              <span>실외기</span>
            </td>
          </tr>
          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">모델명</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <!-- <input type="text" [(ngModel)]="o_model" placeholder=""> -->
              <!-- <ion-input id="olist_input_model" list="out_unit_model" [(ngModel)]="o_model" placeholder=""></ion-input> -->
              <select id="out_unit_model" class="model_style" (change)="input_io_unit('out',1)"
              [(ngModel)]="receipt_data.airConditionerInfo.o_serial.o_model">

              </select>
            </td>
          </tr>

          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">제조번호</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <!-- <ion-input id="olist_input_serial" list="out_unit_serial" [(ngModel)]="o_serial" placeholder=""></ion-input> -->
              <select id="out_unit_serial" class="model_style"  (change)="input_io_unit('out',2)"
              [(ngModel)]="receipt_data.airConditionerInfo.o_serial.o_serial"></select>
            </td>
          </tr>

          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">운전시간</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <ion-input id="olist_input_time" list="out_unit_time" [(ngModel)]="receipt_data.airConditionerInfo.o_serial.o_time" placeholder=""></ion-input>
              <!-- <datalist id="out_unit_time"></datalist> -->
            </td>
          </tr>


          <tr class="flag6-table-tr">
            <td colspan=3 id="flag6-table-tr-title">
              <!-- <ion-icon ios="ios-contact" md="md-contact"></ion-icon> -->
              <span>실내기</span>
            </td>
          </tr>
          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">모델명</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <!-- <input type="text" [(ngModel)]="i_model" placeholder=""> -->
              <!-- <ion-input id="ilist_input_model" list="in_unit_model" [(ngModel)]="i_model" placeholder=""></ion-input> -->
              <select id="in_unit_model" class="model_style"  (change)="input_io_unit('in',1)"
              [(ngModel)]="receipt_data.airConditionerInfo.i_serial.i_model"></select>
            </td>
          </tr>

          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">제조번호</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <!-- <input type="text" [(ngModel)]="i_serial" placeholder=""> -->
              <!-- <ion-input id="ilist_input_serial" list="in_unit_serial" [(ngModel)]="i_serial" placeholder=""></ion-input> -->
              <select id="in_unit_serial" class="model_style"  (change)="input_io_unit('in',2)"
              [(ngModel)]="receipt_data.airConditionerInfo.i_serial.i_serial" ></select>
            </td>
          </tr>

          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">운전시간</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <!-- <input type="text" [(ngModel)]="i_time" placeholder=""> -->
              <ion-input id="ilist_input_time" list="in_unit_time" [(ngModel)]="receipt_data.airConditionerInfo.i_serial.i_time" placeholder=""></ion-input>
              <!-- <datalist id="in_unit_time"></datalist> -->
            </td>
          </tr>


          <tr class="flag6-table-tr">
            <td colspan=3 id="flag6-table-tr-title">
              <!-- <ion-icon ios="ios-contact" md="md-contact"></ion-icon> -->
              <span>기타</span>
            </td>
          </tr>
          <tr class="flag6-table-tr">
            <td class="flag6-table-td-first"><img src="./assets/imgs/checkbox-green.png" alt=""></td>
            <td class="flag6-table-td-second">기타</td>
            <td class="flag6-table-td-third" style="position: relative;">
              <input type="text" [(ngModel)]="receipt_data.io_etc" placeholder="">
            </td>
          </tr>

        </table>

        <!-- <table class="flag6-table" style="width: 100%;">
          <tr class="flag6-table-tr">
            <td colspan=3 id="flag6-table-tr-title">
              <span>실외기</span>
            </td>
          </tr>
        </table>

        <ion-item>
          <ion-label style="text-align:center;">모델명</ion-label>
          <ion-label style="text-align:center;">제조번호</ion-label>
          <ion-label style="text-align:center;">운전시간</ion-label>
        </ion-item>

        <ion-item>
          <ion-label class="unit-input"><input type="text" [(ngModel)]="o_model" readonly></ion-label>
          <ion-label class="unit-input"><input type="text" [(ngModel)]="o_serial" readonly></ion-label>
          <ion-label class="unit-input"><input type="text" [(ngModel)]="o_time" readonly></ion-label>
        </ion-item>

        <br><br>

        <table class="flag6-table" style="width: 100%;">
          <tr class="flag6-table-tr">
            <td colspan=3 id="flag6-table-tr-title">
              <span>실내기</span>
            </td>
          </tr>
        </table>

        <ion-item>
          <ion-label style="text-align:center;">모델명</ion-label>
          <ion-label style="text-align:center;">제조번호</ion-label>
          <ion-label style="text-align:center;">운전시간</ion-label>
        </ion-item>

        <ion-item>
          <ion-label class="unit-input"><input type="text" [(ngModel)]="i_model" readonly></ion-label>
          <ion-label class="unit-input"><input type="text" [(ngModel)]="i_serial" readonly></ion-label>
          <ion-label class="unit-input"><input type="text" [(ngModel)]="i_time" readonly></ion-label>
        </ion-item>

        <br><br>

        <table class="flag6-table" style="width: 100%;">
          <tr class="flag6-table-tr">
            <td colspan=3 id="flag6-table-tr-title">
              <span>기타</span>
            </td>
          </tr>
        </table>

        <ion-item>
          <ion-label class="unit-input"><input type="text" [(ngModel)]="io_etc" readonly></ion-label>
        </ion-item> -->


        <table class="flag6-table" style="width: 100%;">
          <tr class="flag6-table-tr" id="flag6-table-tr-title">
            <td colspan=2>
              <ion-icon ios="ios-briefcase" md="md-briefcase"></ion-icon>
              <span>수리이력</span>
            </td>
          </tr>
        </table>
        <div class="my-waiting-list">
          <table class="my-list-thing" *ngFor="let rl of fix_list; let i = index;">
            <tr>
              <td>{{rl.clientInfo.customer}}/{{rl.error_code}}/{{rl.receipt_content}}</td>
            </tr>
            <tr>
              <td>{{rl.receipt_number}}/{{rl.assigned_company}}/{{rl.remote_division}}/{{rl.receipt_type}}</td>
            </tr>
          </table>
        </div>
      </div>
      <div class="flag-send">
        <input *ngIf="add_new_customer_flag" type="button" class="update-btn" (click)="customer_data_save(1)" value="고객등록">
        <input *ngIf="!add_new_customer_flag" type="button" class="update-btn" (click)="customer_data_save(2)" value="수정">
        <input type="button" class="cancel-btn" (click)="customer_data_cancel()" value="취소">

      </div>
    </article>
  </div>
  <div *ngIf="currentTab==7" class="flag7">
    <header>
      <div class="header-msg">고객관리2</div>
    </header>
    <ion-label  style="margin:0px !important; text-align: center;">
      <ion-icon style="float: left; font-size: 30px; margin: 0 10px;"
      name="arrow-back"  (click)="search_cancel()"></ion-icon>
      <input id="f7_search_input" [(ngModel)]="search_text" placeholder=" 검색" style="width: 50%;"/>
      <button (click)="look_up(search_text)">
        <ion-icon style="font-size: 25px;" name="search"></ion-icon>
      </button>
    </ion-label>

    <ion-item-divider></ion-item-divider>

    <!-- <ion-label style="overflow-y: scroll;" id="f7_search_result" class="f7_result"
    *ngFor="let f7_ls of flag7_searchlist; let i = index;" (click)="flag7_resultget(f7_ls)">
      {{f7_ls.customer}} / {{f7_ls.customer_building}} / {{f7_ls.building_manager_name}}
      <br>
      {{f7_ls.building_manager_call}} // {{f7_ls.remote_division}} / {{f7_ls.customer_type}}
    </ion-label> -->
    <table style="
    table-layout: fixed; width:100%">
      <thead>
        <tr>
          <th style="width:20%">건물담당자</th>
          <th>건물담당자(휴대전화)</th>
          <th>대표상호</th>
          <th>건물명</th>
        </tr>
      </thead>
      <tbody style="overflow-y: scroll;" id="f7_search_result" class="f7_result" *ngFor="let f7_ls of search_result_list; let i = index;" (click)="click_search_result(f7_ls)">
        <tr>
          <td style="text-align: center;">{{f7_ls.building_manager_name}}<p></p></td>
          <td style="text-align: center;">{{f7_ls.building_manager_call}}<p></p></td>
          <td style="text-align: center;">{{f7_ls.customer}}<p></p></td>
          <td style="text-align: center;">{{f7_ls.customer_building}}<p></p></td>
        </tr>
      </tbody>
    </table>
  </div>
</ion-content>
<footer class="main-footer" style="z-index: 1; min-height:80px">
  <div class="foot-menu">
    <div class="foot" id="home" (click)="bottom_icon_switching(1)">
      <table>
        <th id=""></th>
        <tr>
          <div class="foot-icon">
            <ion-icon id="switching1" ios="ios-home-outline" md="md-home"></ion-icon>
          </div>
        </tr>
        <tr class="icon-tr">
          홈
        </tr>
      </table>
    </div>
    <div class="foot" id="take-over" (click)="bottom_icon_switching(2)">
      <table>
        <th id=""></th>
        <tr>
          <div class="foot-icon">
            <ion-icon id="switching2" ios="ios-headset" md="md-headset"></ion-icon>
          </div>
        </tr>
        <tr class="icon-tr">
          접수
        </tr>
      </table>
    </div>
    <div class="foot" id="as-progess" (click)="bottom_icon_switching(3)">
      <table>
        <th id=""></th>
        <tr>
          <div class="foot-icon">
            <ion-icon id="switching3" ios="ios-build" md="md-build"></ion-icon>
          </div>
        </tr>
        <tr class="icon-tr">
          AS처리
        </tr>
      </table>
    </div>
    <div class="foot" id="schedule" (click)="bottom_icon_switching(4)">
      <table>
        <th id=""></th>
        <tr>
          <div class="foot-icon">
            <ion-icon id="switching4" ios="ios-calendar" md="md-calendar"></ion-icon>
          </div>
        </tr>
        <tr class="icon-tr">
          스케줄
        </tr>
      </table>
    </div>
    <div class="foot" id="my-page" (click)="bottom_icon_switching(5)">
      <table>
        <th id=""></th>
        <tr>
          <div class="foot-icon">
            <ion-icon id="switching5" ios="ios-person" md="md-person"></ion-icon>
          </div>
        </tr>
        <tr class="icon-tr">
          마이페이지
        </tr>
      </table>
    </div>
  </div>
</footer>
